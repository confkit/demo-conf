name: "go-server"
description: "Go Server demo"

source:
  git_repo: "git@github.com:confkit/demo-go.git"
  git_branch: "main"

environment:
  BUILD_TARGET_DIR: "bin"

cleaner:
  workspace: false

steps:
  - name: "克隆项目"
    commands:
      - "git clone ${GIT_REPO} -b main ${PROJECT_NAME}"
      - "rm -rf ${PROJECT_NAME}/.git"

  - name: "代码检查"
    container: "go-builder-1.24"
    commands:
      - "cd ${PROJECT_NAME} && task lint"

  - name: "构建应用"
    container: "go-builder-1.24"
    commands:
      - "cd ${PROJECT_NAME} && task build --force"
